<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Đặt Phòng Khách Sạn VIP Siêu Cấp</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Quicksand', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      color: #fff;
    }

    .container {
      background: #1e1e2f;
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0, 255, 255, 0.2);
      width: 100%;
      max-width: 800px;
      animation: slideIn 1s ease-in-out;
    }

    @keyframes slideIn {
      0% {
        opacity: 0;
        transform: translateY(50px);
      }

      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
      color: #00e5ff;
      font-size: 2.8rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #f8f8f8;
    }

    select,
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"],
    textarea {
      width: 100%;
      padding: 0.8rem;
      margin-bottom: 1.2rem;
      border-radius: 12px;
      border: 1px solid #888;
      background: #2e2e42;
      color: #fff;
      transition: all 0.3s ease;
    }

    select:focus,
    input:focus,
    textarea:focus {
      border-color: #00e5ff;
      box-shadow: 0 0 0 3px rgba(0, 229, 255, 0.3);
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .checkbox-group label {
      background: #2e2e42;
      padding: 0.7rem;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
      transition: all 0.3s;
      color: #fff;
    }

    .checkbox-group label:hover {
      background: #00e5ff;
      color: #000;
      box-shadow: 0 0 10px #00e5ff;
    }

    .checkbox-group input[type="checkbox"] {
      transform: scale(1.2);
    }

    .total {
      font-weight: 700;
      margin-bottom: 1.5rem;
      text-align: center;
      font-size: 1.5rem;
      color: #00e676;
    }

    .summary {
      background: #263238;
      padding: 1rem;
      border-radius: 12px;
      margin-top: 1.5rem;
      font-size: 1rem;
      color: #cfd8dc;
    }

    .room-info {
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: #333;
      border-radius: 12px;
      color: #fff;
    }

    .room-info img {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 1rem;
    }

    .room-info .details {
      font-size: 1.1rem;
      color: #cfd8dc;
    }

    button {
      width: 100%;
      padding: 1rem;
      background: linear-gradient(90deg, #00e5ff, #00bcd4);
      color: #000;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px #00e5ff;
    }

    button:hover {
      background: linear-gradient(90deg, #00bcd4, #00e5ff);
      box-shadow: 0 0 20px #00e5ff, 0 0 30px #00e5ff;
    }

    @media (max-width: 600px) {
      .container {
        padding: 1.5rem;
      }

      .checkbox-group {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; width: 100%; justify-content: center;">
      <a href="trangchu.html" style="
        padding: 0.8rem 1.5rem;
        background: linear-gradient(90deg, #ff6f00, #ffa000);
        color: #fff;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: bold;
        text-decoration: none;
        box-shadow: 0 0 10px #ff9800;
        transition: all 0.3s ease;
      " onmouseover="this.style.boxShadow='0 0 20px #ff9800, 0 0 30px #ff9800'"
        onmouseout="this.style.boxShadow='0 0 10px #ff9800'">
        ← Về trang chủ
      </a>
    </div>
    <h1>Đặt Phòng Khách Sạn VIP</h1>

    <label for="name">Tên của bạn:</label>
    <input type="text" id="name" placeholder="Nguyễn Văn A" required />

    <label for="email">Email:</label>
    <input type="email" id="email" placeholder="example@domain.com" required />

    <label for="phone">Số điện thoại:</label>
    <input type="tel" id="phone" placeholder="Nhập số điện thoại" required />

    <label for="checkin">Ngày nhận phòng:</label>
    <input type="date" id="checkin" required />

    <label for="checkout">Ngày trả phòng:</label>
    <input type="date" id="checkout" required />

    <label for="guests">Số người:</label>
    <select id="guests">
      <option value="1">1 Người</option>
      <option value="2">2 Người</option>
      <option value="3">3 Người</option>
      <option value="4">4 Người</option>
    </select>

    <label for="room">Chọn loại phòng:</label>
    <select id="room">
      <option value="0">-- Chọn phòng --</option>
      <option value="1456560" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian1.jpg">
        Cozy Savvy Boutique Hotel Hoi An - 1.456.560đ</option>
      <option value="837589" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian2.webp">
        MaiChi Villa Hoi An - 837.589đ</option>
      <option value="449280" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian4.jpg">
        Hoi An Dream City Hotel - 449.280đ</option>
      <option value="1048800" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian5.jpg">
        Golden River - 1.048.800đ</option>
      <option value="413100" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian6.jpg">
        Viet Long Hoian Beach Hotel - STAY 24H - 413.100đ</option>
      <option value="690000" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian3.jpg">
        Hoianese Heritage Hotel - Truly Hoi An - 690.000đ</option>
      <option value="625600" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian7.jpg">
        December Hoi An Villa - 625.600đ</option>
      <option value="1169460" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian8.jpg">
        Calm House Hotel Hoi An 1 - 1.169.460đ</option>
      <option value="1450508" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian9.jpg">
        Lantana Riverside Hoi An Boutique Hotel & Spa - 1.450.508đ</option>
      <option value="1296000" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ."
        data-img="hoian10jpg.jpg">Uptown Hoi An Hotel & Spa - 1.296.000đ</option>
      <option value="520000" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian12.jpg">
        Premium CGP Hotel Hoi An - 520.000đ</option>
      <option value="479273" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian11.jpg">
        Hoi An Legend Charm Boutique Hoi An Hotel - 479.273đ</option>
      <option value="549045" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian14.jpg">
        Nature Resort Hoi An By K D H - 549.045đ</option>
      <option value="945000" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian15.jpg">
        Serene Nature Hotel & Spa - 945.000</option>
      <option value="700000" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian16.jpg">
        The Nam An Villa Hoi An - 700.000đ</option>
      <option value="601800" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian17.jpg">
        Crony Villa - STAY 24H - 601.800</option>
      <option value="1000500" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian18.jpg">
        RAON Old Town Hotel - 1.000.500đ</option>
      <option value="862897" data-desc="Phòng VIP - Phòng cao cấp, view biển, đầy đủ dịch vụ." data-img="hoian19.jpg">
        Banana Garden Villa - 862.897đ</option>
      <option value="1900000 " data-desc="Thả đèn hoa đăng, buffet tối, và nghỉ dưỡng 2 đêm." data-img="hs7.jpg">
        Gói Trăng Rằm - 1.900.000đ</option>
      <option value="3500000 " data-desc="Phòng view biển, tour Cù Lao Chàm, và spa." data-img="hs8.jpg">
        Combo Biển Xanh - 3.500.000đ</option>
      <option value="4200000  " data-desc="Phòng rộng, vé tham quan, và đưa đón sân bay." data-img="hs9.jpg">
        Kỳ Nghỉ Gia Đình - 4.200.000đ</option>
      <option value="4500000 " data-desc="Khám Phá Hội An từ Chùa Cầu Đến Rừng Dừa 7 Mẫu" data-img="hs10.jpg">
        Khám Phá Hội An - 4.500.000đ</option>


    </select>

    <div class="room-info" id="room-info">
      <img id="room-img" src="" alt="Ảnh phòng" style="display:none;" />
      <p id="room-desc" class="details"></p>
    </div>

    <label for="request_type">Loại yêu cầu:</label>
    <select id="request_type" required>
      <option value="Đặt phòng">Đặt phòng</option>
      <option value="Tour du lịch">Tour du lịch</option>
      <option value="Spa & Thư giãn">Spa & Thư giãn</option>
      <option value="Tiệc cưới/Hội nghị">Tiệc cưới/Hội nghị</option>
      <option value="Ẩm thực">Ẩm thực</option>
      <option value="Góp ý">Góp ý</option>
      <option value="Khác">Khác</option>
    </select>

    <label>Dịch vụ kèm theo:</label>
    <div class="checkbox-group">
      <label><input type="checkbox" class="service" value="35000"> Thuê xe đạp - 35.000đ/ngày</label>
      <label><input type="checkbox" class="service" value="200000"> Tour Phố cổ có hướng dẫn - 200.000đ</label>
      <label><input type="checkbox" class="service" value="70000"> Thuê xe máy - 70.000đ</label>
      <label><input type="checkbox" class="service" value="500000"> Tour Cù Lao Chàm - 500.000đ</label>
      <label><input type="checkbox" class="service" value="100000"> Lớp làm đèn lồng - 100.000đ</label>
      <label><input type="checkbox" class="service" value="30000"> Dịch vụ giặt ủi - 30.000đ/kg</label>
    </div>

    <label for="details">Yêu cầu chi tiết:</label>
    <textarea id="details" rows="5" placeholder="Ví dụ: Phòng view biển, yêu cầu tổ chức sinh nhật..."
      required></textarea>

    <div class="total" id="total">Tổng tiền: 0đ</div>
    <div class="summary" id="summary">Chi tiết đặt phòng sẽ hiển thị ở đây sau khi bạn chọn đầy đủ thông tin.</div>
    <button onclick="bookRoom()">Đặt phòng</button>
  </div>

  <script>
    // Initialize EmailJS
    emailjs.init("neFeefFy6lcRVzvON");

    // DOM elements
    const roomSelect = document.getElementById("room");
    const guestsSelect = document.getElementById("guests");
    const serviceCheckboxes = document.querySelectorAll(".service");
    const totalDisplay = document.getElementById("total");
    const summaryDisplay = document.getElementById("summary");
    const roomInfo = document.getElementById("room-info");
    const roomDesc = document.getElementById("room-desc");
    const roomImg = document.getElementById("room-img");

    // Calculate total cost and update summary
    function calculateTotal() {
      const roomPrice = parseInt(roomSelect.value) || 0;
      const numGuests = parseInt(guestsSelect.value) || 1;
      let serviceTotal = 0;
      const selectedServices = [];
      serviceCheckboxes.forEach(cb => {
        if (cb.checked) {
          serviceTotal += parseInt(cb.value);
          selectedServices.push(cb.parentElement.textContent.trim());
        }
      });
      const total = roomPrice + serviceTotal;
      const totalPerGuest = numGuests > 0 ? total / numGuests : total;
      totalDisplay.textContent = `Tổng tiền: ${total.toLocaleString()}đ (Mỗi người: ${totalPerGuest.toLocaleString()}đ)`;

      const roomText = roomSelect.options[roomSelect.selectedIndex].text;
      summaryDisplay.innerHTML = `
        <strong>Loại phòng:</strong> ${roomText}<br>
        <strong>Số người:</strong> ${numGuests}<br>
        <strong>Dịch vụ:</strong> ${selectedServices.join(", ") || "Không có"}<br>
        <strong>Tổng tiền:</strong> ${total.toLocaleString()}đ
      `;
    }

    // Update room info (image and description)
    function updateRoomInfo() {
      const selectedOption = roomSelect.options[roomSelect.selectedIndex];
      const roomDescText = selectedOption.getAttribute("data-desc") || "";
      const roomImgUrl = selectedOption.getAttribute("data-img") || "";
      roomDesc.textContent = roomDescText;
      roomImg.src = roomImgUrl;
      roomImg.style.display = roomImgUrl ? "block" : "none";
      calculateTotal();
    }

    // Event listeners
    roomSelect.addEventListener("change", updateRoomInfo);
    guestsSelect.addEventListener("change", calculateTotal);
    serviceCheckboxes.forEach(cb => cb.addEventListener("change", calculateTotal));

    // Book room function
    function bookRoom() {
      // Collect form data
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const checkin = document.getElementById("checkin").value;
      const checkout = document.getElementById("checkout").value;
      const guests = guestsSelect.value;
      const request_type = document.getElementById("request_type").value;
      const details = document.getElementById("details").value.trim();
      const roomOption = roomSelect.options[roomSelect.selectedIndex];
      const roomSelected = roomSelect.selectedIndex > 0;

      // Validate required fields
      if (!name || !email || !phone || !checkin || !checkout || !guests || !request_type || !details || !roomSelected) {
        summaryDisplay.innerHTML += `
          <br><span style="color: red;">❌ Vui lòng điền đầy đủ thông tin và chọn loại phòng.</span>
        `;
        return;
      }

      // Collect room and services for details
      const roomType = roomOption.text;
      const roomPrice = parseInt(roomOption.value) || 0;
      let selectedServices = [];
      let serviceTotal = 0;
      serviceCheckboxes.forEach(cb => {
        if (cb.checked) {
          serviceTotal += parseInt(cb.value);
          selectedServices.push(cb.parentElement.textContent.trim());
        }
      });
      const total = roomPrice + serviceTotal;
      const confirmationCode = "VIP" + Math.floor(Math.random() * 1000000);

      // Combine room and services into details
      const fullDetails = `
        ${details}
        Loại phòng: ${roomType}
        Dịch vụ kèm theo: ${selectedServices.join(", ") || "Không có"}
        Tổng tiền: ${total.toLocaleString()}đ
      `;

      // Prepare email parameters to match EmailJS template
      const emailParams = {
        name: name,
        email: email,
        phone: phone,
        checkin: checkin,
        checkout: checkout,
        guests: guests,
        request_type: request_type,
        details: fullDetails,
        to_email: "huyonechampfli@gmail.com"
      };

      // Send email via EmailJS
      emailjs.send("service_rqc6kqf", "template_6jk3z13", emailParams)
        .then(() => {
          summaryDisplay.innerHTML = `
            <strong>Loại phòng:</strong> ${roomType}<br>
            <strong>Số người:</strong> ${guests}<br>
            <strong>Dịch vụ:</strong> ${selectedServices.join(", ") || "Không có"}<br>
            <strong>Tổng tiền:</strong> ${total.toLocaleString()}đ<br>
            <strong>Mã xác nhận:</strong> ${confirmationCode}<br>
            <span style="color: #00e676;">✅ Đơn đặt phòng đã được gửi thành công qua email!</span>
          `;
          // Reset form
          document.getElementById("name").value = "";
          document.getElementById("email").value = "";
          document.getElementById("phone").value = "";
          document.getElementById("checkin").value = "";
          document.getElementById("checkout").value = "";
          document.getElementById("details").value = "";
          roomSelect.selectedIndex = 0;
          guestsSelect.selectedIndex = 0;
          document.getElementById("request_type").selectedIndex = 0;
          serviceCheckboxes.forEach(cb => cb.checked = false);
          updateRoomInfo();
        })
        .catch((error) => {
          summaryDisplay.innerHTML += `
            <br><strong style="color: red;">❌ Gửi email thất bại.</strong>
            <br>Lỗi: ${error.text}
          `;
        });
    }
  </script>
</body>

</html>